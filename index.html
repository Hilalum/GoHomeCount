<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>下班倒计时</title>

<style media="screen" type="text/css">
.bg{
background:url(sz5.jpg);
filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod='scale')";
-moz-background-size:100% 100%;
	background-size:100% 100%;
}

 #timer {
            width: 100vw;        /* 宽度  页面宽度的90% */
            height: 100vh;       /* 高度  页面高度的60% */
            /* 容器自动水平居中 */
            margin: 0px auto; 
             
            /* 实现垂直居中 距顶部高度  也可以写成 calc((100vh - 60vh)/2) */
            margin-top: 45vh; 
	text-align:center;
	line-height:50px;
	color:white;
}

</style>
<script src="https://libs.baidu.com/jquery/1.11.3/jquery.min.js">
</script>
</head>
<body class="bg">
<div id="timer">
下班了，好好休息
</div>
<script>
  function Color(elem) {
    this.elem = elem
	this.alig=['left','right','center'];
    this.colors = ['#f1c40f', '#2ecc71', '#e74c3c', '#9b59b6','#fffafa','#fffaf0','#fffacd','#fff8dc','#fff68f','#fff5ee','#fff0f5','#ffefdb','#ffefd5','#ffec8b','#ffebcd','#ffe7ba','#ffe4e1','#ffe4c4','#ffe4b5','#ffe1ff','#ffdead','#ffdab9','#ffd700','#ffd39b','#ffc1c1','#ffc125','#ffc0cb','#ffbbff','#ffb90f','#ffb6c1','#ffb5c5','#ffaeb9','#ffa54f','#ffa500','#ffa07a','#ff8c69','#ff8c00','#ff83fa','#ff82ab','#ff8247','#ff7f50','#ff7f24','#ff7f00','#ff7256','#ff6eb4','#ff6a6a','#ff69b4','#ff6347','#ff4500','#ff4040','#ff3e96','#ff34b3','#ff3030','#ff1493','#ff00ff','#ff0000','#fdf5e6','#fcfcfc','#fafafa','#fafad2','#faf0e6','#faebd7','#fa8072','#f8f8ff','#f7f7f7','#f5fffa','#f5f5f5','#f5f5dc','#f5deb3','#f4f4f4','#f4a460','#f2f2f2','#f0ffff','#f0fff0','#f0f8ff','#f0f0f0','#f0e68c','#f08080','#eeeee0','#eeeed1','#eeee00','#eee9e9','#eee9bf','#eee8cd','#eee8aa','#eee685','#eee5de','#eee0e5','#eedfcc','#eedc82','#eed8ae','#eed5d2','#eed5b7','#eed2ee','#eecfa1','#eecbad','#eec900','#eec591','#eeb4b4','#eeb422','#eeaeee','#eead0e','#eea9b8','#eea2ad','#ee9a49','#ee9a00','#ee9572','#ee82ee','#ee8262','#ee7ae9','#ee799f','#ee7942','#ee7621','#ee7600','#ee6aa7','#ee6a50','#ee6363','#ee5c42','#ee4000','#ee3b3b','#ee3a8c','#ee30a7','#ee2c2c','#ee1289','#ee00ee','#ee0000','#ededed','#ebebeb','#eaeaea','#e9967a','#e8e8e8','#e6e6fa','#e5e5e5','#e3e3e3','#e0ffff','#e0eeee','#e0eee0','#e0e0e0','#e066ff','#dedede','#deb887','#dda0dd','#dcdcdc','#dc143c','#dbdbdb','#db7093','#daa520','#da70d6','#d9d9d9','#d8bfd8','#d6d6d6','#d4d4d4','#d3d3d3','#d2b48c','#d2691e','#d1eeee','#d1d1d1','#d15fee','#d02090','#cfcfcf','#cdcdc1','#cdcdb4','#cdcd00','#cdc9c9','#cdc9a5','#cdc8b1','#cdc673','#cdc5bf','#cdc1c5','#cdc0b0','#cdbe70','#cdba96','#cdb7b5','#cdb79e','#cdb5cd','#cdb38b','#cdaf95','#cdad00','#cdaa7d','#cd9b9b','#cd9b1d','#cd96cd','#cd950c','#cd919e','#cd8c95','#cd853f','#cd8500','#cd8162','#cd7054','#cd69c9','#cd6889','#cd6839','#cd661d','#cd6600','#cd6090','#cd5c5c','#cd5b45','#cd5555','#cd4f39','#cd3700','#cd3333','#cd3278','#cd2990','#cd2626','#cd1076','#cd00cd','#cd0000','#cccccc','#caff70','#cae1ff','#c9c9c9','#c7c7c7','#c71585','#c6e2ff','#c67171','#c5c1aa','#c4c4c4','#c2c2c2','#c1ffc1','#c1cdcd','#c1cdc1','#c1c1c1','#c0ff3e','#bfefff','#bfbfbf','#bf3eff','#bebebe','#bdbdbd'];
    this.run = function (target = 'background') {
      setInterval(() => {
        let i = Math.floor(Math.random() * this.colors.length)
        this.elem.style[target] = this.colors[i];
		document.getElementById('timer').style.fontSize=Math.random()*150+'pt';
		document.getElementById('timer').style.top=Math.random()*1000+'px';
		document.getElementById('timer').style.left=Math.random()*1500+'px';
		document.getElementById('timer').style.marginTop=Math.random()*80+'vh';
		document.getElementById('timer').style.textAlign=this.alig[Math.floor(Math.random() * this.alig.length)];
      },200)
    }
  }
function TimeTo(dd,ss) {
    var t = new Date(dd), //取得指定时间的总毫秒数  
        n = new Date().getTime(), //取得当前毫秒数  
        c = t - n; //得到时间差
    //w = (t - n)*1000;//得到时间差
    if (ss=='下班'&&(c <= 0||new Date().getDay()==0)) { //如果差小于等于0  也就是过期或者正好过期，则推出程序  
        clearInterval(window['ttt']); //清除计时器  
		new Color(document.body).run();
		document.getElementById('timer').innerHTML = '下班了，好好休息';
        return; //结束执行  
    }

    d = parseInt(c / 1000 / 60 / 60 / 24), //总毫秒除以一天的毫秒 得到相差的天数  
        h = parseInt(c / 1000 / 60 / 60 - (24 * d)), //然后取完天数之后的余下的毫秒数再除以每小时的毫秒数得到小时 
        m = parseInt(c / 1000 / 60 - (24 * 60 * d) - (60 * h)), //减去天数和小时数的毫秒数剩下的毫秒，再除以每分钟的毫秒数，得到分钟数 
        s = parseInt(c / 1000 - (24 * 60 * 60 * d) - (60 * 60 * h) - (60 * m)); //得到最后剩下的毫秒数除以1000 就是秒数，再剩下的毫秒自动忽略即可
    hm = Math.floor((c - (24 * 60 * 60 * 1000 * d) - (60 * 60 * 1000 * h) - (60 * 1000 * m) - (s * 1000)) / 10);
    if (hm < 10) {
        hm = "0" + hm;
    }
    if (s < 10) {
        s = "0" + s;
    }
    if (m < 10) {
        m = "0" + m;
    }
    if (h < 10) {
        h = "0" + h;
    }
    document.getElementById('timer').innerHTML = '距离'+ss+'还有：' + h + '小时' + m + '分钟' + s + '秒' + hm + '毫秒'; //最后这句讲定义好的显示 更新到 ID为 timer的 div中

}
(function() {
    window['ttt'] = setInterval(function() {
		var myDate = new Date();
		var time = '';
		var s='';
	    var h=myDate.getHours();
	    var m = myDate.getMinutes();
		if(myDate.getDay()==0 || myDate.getDay()==6|| myDate.getDay()==5){
		time=myDate.toLocaleDateString()+ ' 17:30:00';
		s='下班';
		}else{
			if(h<17||(h==17&&m<30)){
		time=myDate.toLocaleDateString()+ ' 17:30:00';
		s='休息';
		}
		time=myDate.toLocaleDateString()+ ' 19:00:00';
		s='下班';
		}
		
		if(h<12){
		time=myDate.toLocaleDateString()+ ' 12:00:00';
		s='午休';
		}
		
		if((h==13&&m<=30)||h==12){
		document.getElementById('timer').innerHTML = '哎呦，午休时间';
        return; //结束执行 
		}
	    		if((h==18&&m<=30)||(h==17&&m>=30)){
		document.getElementById('timer').innerHTML = 'Happy dinner!';
        return; //结束执行 
		}
        TimeTo(time,s); //定义倒计时的结束时间，注意格式  
    }, 50); //定义计时器，每隔1000毫秒 也就是1秒 计算并更新 div的显示  
})();
</script>

</body>
</html>
